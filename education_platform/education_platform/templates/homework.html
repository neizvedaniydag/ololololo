{% extends "base.html" %}

{% block title %}–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è{% endblock %}

{% block content %}
<div class="homework-page">
    <div class="page-header">
        <h1>–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h1>
        <button onclick="toggleAddForm()" class="btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
    </div>

    <div id="add-form" class="homework-form" style="display: none;">
        <h2>–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
        <form method="POST" action="{{ url_for('homework') }}">
            <div class="form-group">
                <label for="subject">–ü—Ä–µ–¥–º–µ—Ç:</label>
                <select id="subject" name="subject" required>
                    <option value="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                    <option value="–†—É—Å—Å–∫–∏–π —è–∑—ã–∫">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</option>
                    <option value="–§–∏–∑–∏–∫–∞">–§–∏–∑–∏–∫–∞</option>
                    <option value="–•–∏–º–∏—è">–•–∏–º–∏—è</option>
                    <option value="–ë–∏–æ–ª–æ–≥–∏—è">–ë–∏–æ–ª–æ–≥–∏—è</option>
                    <option value="–ò—Å—Ç–æ—Ä–∏—è">–ò—Å—Ç–æ—Ä–∏—è</option>
                    <option value="–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ">–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ</option>
                    <option value="–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                    <option value="–ì–µ–æ–≥—Ä–∞—Ñ–∏—è">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</option>
                    <option value="–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                    <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</option>
                </select>
            </div>

            <div class="form-group">
                <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="title" name="title" required>
            </div>

            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="description" name="description" rows="3"></textarea>
            </div>

            <div class="form-group">
                <label for="due_date">–°—Ä–æ–∫ —Å–¥–∞—á–∏:</label>
                <input type="date" id="due_date" name="due_date" required>
            </div>

            <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    </div>

    <div class="homework-list">
        <h2>–í—Å–µ –∑–∞–¥–∞–Ω–∏—è</h2>
        {% if homeworks %}
            {% for hw in homeworks %}
            <div class="homework-card {% if hw.completed %}completed{% endif %}">
                <div class="hw-header">
                    <span class="hw-subject">{{ hw.subject }}</span>
                    <span class="hw-due">üìÖ {{ hw.due_date.strftime('%d.%m.%Y') }}</span>
                </div>
                <h3>{{ hw.title }}</h3>
                {% if hw.description %}
                <p>{{ hw.description }}</p>
                {% endif %}
                <div class="hw-actions">
                    <a href="{{ url_for('toggle_homework', hw_id=hw.id) }}"
                       class="btn-small {% if hw.completed %}btn-secondary{% else %}btn-success{% endif %}">
                        {% if hw.completed %}
                            ‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É
                        {% else %}
                            ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º
                        {% endif %}
                    </a>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="empty-state">–î–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
        {% endif %}
    </div>
</div>

<script>
function toggleAddForm() {
    const form = document.getElementById('add-form');
    form.style.display = form.style.display === 'none' ? 'block' : 'none';
}
</script>
{% endblock %}
